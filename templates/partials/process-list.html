<!-- Process List Table -->
<div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
    <table class="min-w-full divide-y divide-gray-300">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Process
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    PID
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    CPU %
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Memory
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Status
                </th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {{range .Processes}}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 h-8 w-8">
                            <div class="h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-cog text-gray-600 text-xs"></i>
                            </div>
                        </div>
                        <div class="ml-4">
                            <div class="text-sm font-medium text-gray-900">{{.Name}}</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono">
                    {{.PID}}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {{printf "%.1f" .CPUPercent}}%
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    <script>document.write(formatBytes({{.Memory}}));</script>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full
                        {{if eq .Status "running"}}bg-green-100 text-green-800{{else if eq .Status "sleeping"}}bg-yellow-100 text-yellow-800{{else}}bg-gray-100 text-gray-800{{end}}">
                        {{.Status}}
                    </span>
                </td>
            </tr>
            {{else}}
            <tr>
                <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">
                    No processes found
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<div class="mt-4 flex justify-between items-center text-sm text-gray-500">
    <div>
        Showing top {{len .Processes}} processes
    </div>
    <div class="timestamp">
        Last updated: <script>document.write(new Date().toLocaleTimeString());</script>
    </div>
</div>